## union

联合（union）是一种节省空间的特殊的类，一个 union 可以有多个数据成员，但是在任意时刻**只有一个数据成员可以有值**。当某个成员被赋值后其他成员变为未定义状态。联合有如下特点：

- 默认访问控制符为 public
- 可以含有构造函数、析构函数
- 不能含有引用类型的成员
- 不能继承自其他类，不能作为基类
- 不能含有虚函数
- 匿名 union 在定义所在作用域可直接访问 union 成员
- 匿名 union 不能包含 protected 成员或 private 成员
- 全局匿名联合必须是静态（static）的

## 类的大小计算

- 空类的大小为1。
- 静态数据成员被编译器放在程序的一个global data members中，它是类的一个数据成员，但不影响类的大小。
- 一个类中，虚函数本身、成员函数（包括静态与非静态）和静态数据成员都是不占用类对象的存储空间。
- 对于包含虚函数的类，不管有多少个虚函数，只有一个虚指针,vptr的大小。
- 普通继承，派生类继承了所有基类的函数与成员，要按照字节对齐来计算大小
- 虚函数继承，不管是单继承还是多继承，都是继承了基类的vptr。(32位操作系统4字节，64位操作系统 8字节)！
- 虚继承,继承基类的vptr。

> 1. 计算偏移量从0开始计算；
> 2. 当前元素的偏移从元素自身大小的整数倍开始计算。
> 3. 最后结果一定是结构体中最大基本数据类型的整数倍；

## enum

枚举类型的定义格式为：

```cpp
enum <类型名> {<枚举常量表>};
```

**格式说明：**

- 关键字enum——指明其后的标识符是一个枚举类型的名字。
- 枚举常量表——由枚举常量构成。"枚举常量"或称"枚举成员"，是以标识符形式表示的整型量，表示枚举类型的取值。枚举常量表列出枚举类型的所有取值，各枚举常量之间以"，"间隔，且必须各不相同。取值类型与条件表达式相同。

**应用举例：**

```
enum color_set1 {RED, BLUE, WHITE, BLACK}; // 定义枚举类型color_set1
enum week {Sun, Mon, Tue, Wed, Thu, Fri, Sat}; // 定义枚举类型week

enum fruit_set {apple, orange, banana=1, peach, grape}
//枚举常量apple=0,orange=1, banana=1,peach=2,grape=3。

enum week {Sun=7, Mon=1, Tue, Wed, Thu, Fri, Sat};
//枚举常量Sun,Mon,Tue,Wed,Thu,Fri,Sat的值分别为7、1、2、3、4、5、6。
//在指定值之前的枚举常量仍按默认方式取值，而指定值之后的枚举常量按依次加1的原则取值。 各枚举常量的值可以重复。

enum letter_set {'a','d','F','s','T'}; //枚举常量不能是字符常量
enum year_set{2000,2001,2002,2003,2004,2005}; //枚举常量不能是整型常量
```

## 友元类

B类是A类的友元，B类的成员函数可以访问A类的private和protect数据，反之不行。

## 构造函数与析构函数

### 顺序问题

先调用成员的构造函数，再调用自己的构造函数。析构顺序反之。

出现继承关系，先调用父类的构造函数。

出现初始化列表形式，构造顺序是根据变量定义的先后顺序来判断的。

## 🆙基类与派生类

基类对象与派生类对象之间存在赋值相容性。包括以下几种情况：

把派生类对象赋值给基类对象。

把派生类对象的地址赋值给基类指针。

用派生类对象初始化基类对象的引用。

反之则不行，即不能把基类对象赋值给派生类对象；不能把基类对象的地址赋值给派生类对象的指针；也不能把基类对象作为派生对象的引用。

## 继承访问权限

1. 基类中protected的成员

> 类内部：可以访问
>
> 类的使用者：不能访问
>
> 类的派生类成员：可以访问

2.派生类不可访问基类的private成员

3.派生类可访问基类的protected成员

> [!NOTE]
>
> 派生类中调用，而不是使用者直接打印赋值操作。

4.派生类可访问基类的public成员

---

不同的继承方式，会将原有的权限转变。

## 静态数据成员

用关键字static声明

该类的所有对象维护该成员的同一个拷贝

必须在类外定义和初始化，用(::)来指明所属的类。

## 静态成员函数

类外代码可以使用类名和作用域操作符来调用静态成员函数。

静态成员函数只能引用属于该类的静态数据成员或静态成员函数。
